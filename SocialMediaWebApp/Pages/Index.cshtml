@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<script>
    function createBrowseUserCookie(author) 
    {
        document.cookie = "BrowseUser=" + author + "; path=/";

    }
    function createBrowseCommunityCookie(community) {
        document.cookie = "BrowseCommunity=" + community + "; path=/";

    }

</script>


@foreach (var post in Model.postDtos)
{
    <br />


    <div class="PostCard">
        <form method="post" asp-page-handler="Upvote">
            <button type="submit" class="Postbutton">
                Upvote
            </button>
            <input type="hidden" name="postId" value="@post.PostId" />
        </form>
        <form method="post" asp-page-handler="Downvote">
            <button type="submit" class="Postbutton">
                Downvote
            </button>
            <input type="hidden" name="postId" value="@post.PostId" />
        </form>
        <p class="PostCardScore">Score : @post.Score</p>
        <p>Community - <a href="/BrowseCommunity" onclick="createBrowseCommunityCookie('@post.CommunityName')"> @post.CommunityName</a></p>
        <p>Author - <a href="/BrowseUser" onclick="createBrowseUserCookie('@post.Author')"> @post.Author</a></p>
        <p class="PostDate"> Date - @post.DateCreated</p>
        <div class="PostCardTitle">
            <h3> @post.Title</h3>
        </div>
        <div class="PostCardBody">
            <p> @post.Body</p>
        </div>
        <div class="PostCardFooter">
            <form method="post" asp-page-handler="ViewComments">
                <button type="submit" class="CommentBoxButton">
                 View comments
              </button>
              <input type="hidden" name="postId" value="@post.PostId" />
            </form>
        </div>
    </div>
    <br />
}








